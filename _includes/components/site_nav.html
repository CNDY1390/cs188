{%- comment -%} 
Override Just the Docs components/site_nav.html with language filtering
This file is called by sidebar.html (or default layout) to generate navigation
{%- endcomment -%}

{%- comment -%} Get current language from page.lang (set by _config.yml defaults) {%- endcomment -%}
{%- assign current_lang = page.lang | default: "en" -%}

{%- comment -%} Filter site.html_pages by language {%- endcomment -%}
{%- assign lang_filtered_pages = "" | split: "X" -%}
{%- for item in site.html_pages -%}
  {%- assign item_lang = item.lang | default: "en" -%}
  {%- if item_lang == current_lang -%}
    {%- assign lang_filtered_pages = lang_filtered_pages | push: item -%}
  {%- endif -%}
{%- endfor -%}

{%- comment -%} Use our custom nav.html with filtered pages {%- endcomment -%}
{% include nav.html pages=lang_filtered_pages key=nil %}

