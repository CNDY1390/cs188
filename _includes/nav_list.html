{%- comment -%} Language already filtered in nav.html, just check exclude {%- endcomment -%}
{%- unless include.node.released == false and
jekyll.environment != "debug" -%} {%- assign include.node_url_size =
include.node.url | size -%} {%- assign url_size = include.node.url | size -%}
{%- assign prefix = page.url | slice: 0, url_size -%}
<li class="nav-list-item {% if include.node.url == prefix %} active{% endif %}">
  {%- comment -%} Check if node has children in filtered pages_list {%- endcomment -%}
  {%- assign children_list = include.pages_list | where: "parent", include.node.title -%}
  {%- assign node_has_children = false -%}
  {%- if children_list.size > 0 and include.depth <= site.max_nav_depth -%}
    {%- assign node_has_children = true -%}
  {%- endif -%}
  {%- if node_has_children -%}
  <a href="#" class="nav-list-expander" onclick="var li=this.closest('.nav-list-item');if(li){var ul=li.querySelector('ul.nav-list');if(ul){var isHidden=ul.style.display==='none'||!ul.style.display;ul.style.display=isHidden?'':'none';li.classList.toggle('active',!isHidden);}return false;"
    ><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg
  ></a>
  {%- endif -%}
  <a
    href="{{ include.node.url | relative_url }}"
    class="nav-list-link{% if page.url == include.node.url %} active{% endif %}"
    >{{ include.node.title }}</a
  >
  {%- if node_has_children -%}
  {%- if include.node.child_nav_order == 'desc' -%} {%- assign children_list =
  children_list | reverse -%} {%- endif -%}
  {%- assign filtered_children = children_list -%}
  {%- assign children_depth = include.depth | plus:1 -%}
  <ul class="nav-list child" style="display: none;">
    {%- for child in filtered_children -%} {%- include nav_list.html node=child
    depth=children_depth pages_list=include.pages_list -%} {%- endfor -%}
  </ul>
  {%- endif -%} {%- endunless -%}
</li>
